"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{2925:function(e,t,a){a.d(t,{TS:function(){return I},T$:function(){return C}});var s=a(6287),r=a(2499),l=a(6729),i=a(5673),n=a(6201),d=a(7825),o=a(153),c=a(5184);let{addToCart:u,getCart:m,removeItemFromCart:f,getItem:p}=(0,i.U)(n._),x=()=>{let e=(0,c.useRouter)(),t=(0,o.useTranslations)("actions"),{user:a}=(0,d.L)(),{items:s,setCart:i}=(0,l.x)();return{handleAddItem:async l=>{let{id:n,calledFromCheckout:d,payment_type:o,itemType:c,gift_to:f}=l,x=await p(n);if(!a){(0,r.h)(t("please-authorize"),"red");return}if(function(e,a){let l=s.some(e=>1===e.payment_type),i=s.some(e=>0===e.payment_type),n=e=>((0,r.h)(e,"red"),!1);if(!e)return n(t("item-not-found"));let{quantityGlobalCurrentLimit:d,quantityGlobalLimit:o,quantityUserLimit:c,quantityUserCurrentLimit:u}=e,m="subscription"===a;return null!==o&&d===o?n(t("item-out-of-stock")):null!==c&&u===c?n(t("reached-stock-limit")):m&&i||!m&&l?n(t("cant-mix-normal-and-subscription")):!m||!l||n(t("cant-add-more-than-one-subscription"))}(x,c))try{await u({id:n,payment_type:o,promoted:d,..."gift"===o&&f?{gift_to:f}:{}});let a=await m();i(a);let s=t("item-added-to-cart");(0,r.h)(s,"green"),"subscription"!==o||d||e.push("/checkout")}catch(e){console.error("Error while adding item:",e)}},handleRemoveItem:async e=>{try{await f(e);let a=await m();i(a);let s=t("item-removed-from-cart");(0,r.h)(s,"red")}catch(e){console.error("Error while removing item:",e)}}}};var h=a(6626),g=a(3908),y=a(5993),b=a(7590),j=a(1730),w=a(9233),N=a(4885),v=a(9334);function C(e){let{hideButton:t,direction:a="col",isItemInCart:r,setShowModal:l,item:i,displayFull:n=!0}=e,[d,o]=(0,v.useState)(!1),c=!!i.is_subs_only;return c?(0,s.jsxs)("div",{className:(0,y.W)("col"===a?"flex w-full flex-col gap-2 md:flex-row md:items-center md:justify-center":"flex items-center justify-center gap-2"),children:[(0,s.jsx)(h.z,{"aria-label":"Info",onClick:()=>l(!0),variant:"secondary",size:"icon",className:(0,y.W)("h-[50px]","col"===a?"w-full md:w-[50px]":"w-[50px]"),children:(0,s.jsx)(b.Z,{size:24,"aria-hidden":!0})}),(0,s.jsx)("div",{className:"w-full",children:r?(0,s.jsx)(_,{isItemInCart:r,item:i,displayFull:n,addToCartPressed:d,setAddToCartPressed:o,wide:!0}):(0,s.jsx)(T,{isItemInCart:r,item:i,displayFull:n,addToCartPressed:d,setAddToCartPressed:o,wide:!0})})]}):(0,s.jsxs)("div",{className:(0,y.W)("flex items-center justify-center gap-2","col"===a&&"mt-auto grid grid-cols-[50px,1fr]",t&&"col"===a&&"w-full grid-cols-[1fr]","row"===a&&"grid grid-cols-[50px,1fr] md:flex"),children:[t?null:(0,s.jsx)(h.z,{"aria-label":"Info",onClick:()=>l(!0),variant:"secondary",size:"icon",className:"h-[50px] w-[50px]",children:(0,s.jsx)(b.Z,{size:24,"aria-hidden":!0})}),(0,s.jsx)(I,{isItemInCart:r,item:i,displayFull:n,addToCartPressed:d,setAddToCartPressed:o,is_subs_only:c})]})}function I(e){let{isItemInCart:t,item:a,displayFull:r,addToCartPressed:l,setAddToCartPressed:i,is_subs_only:n,showGiftButton:d=!1}=e,[u,m]=(0,v.useState)(!1),[f,p]=(0,v.useState)(""),[b,w]=(0,v.useState)(!1),{handleAddItem:N}=x(),C=(0,o.useTranslations)("card"),I=(0,c.usePathname)(),z=async()=>{if(f)try{w(!0),i(!0),await N({id:a.id,calledFromCheckout:"/checkout"===I,payment_type:"gift",itemType:"regular",gift_to:f}),m(!1),p("")}catch(e){console.error("Error while gifting item:",e)}finally{w(!1),i(!1)}};return n?t?(0,s.jsx)(_,{isItemInCart:t,item:a,displayFull:r,addToCartPressed:l,setAddToCartPressed:i,wide:!0}):(0,s.jsx)(T,{isItemInCart:t,item:a,displayFull:r,addToCartPressed:l,setAddToCartPressed:i,wide:!0}):(0,s.jsxs)(s.Fragment,{children:[d&&!t&&(0,s.jsx)("div",{className:(0,y.W)("flex flex-col gap-2",r?"min-w-[180px]":""),children:u?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(g.I,{placeholder:C("gift-username-placeholder",{defaultValue:"Recipient username"}),value:f,onChange:e=>p(e.target.value),className:"h-[50px]",disabled:b}),(0,s.jsx)(h.z,{onClick:z,disabled:!f||b,className:"h-[50px]",children:b?(0,s.jsx)(j.Z,{className:"animate-spin",size:24}):C("gift",{defaultValue:"Gift"})}),(0,s.jsx)(h.z,{variant:"ghost",onClick:()=>{m(!1),p("")},className:"h-[50px]",children:"âœ–"})]}):(0,s.jsxs)(h.z,{variant:"outline",className:"h-[50px] gap-2",onClick:()=>m(!0),disabled:l,children:["\uD83C\uDF81 ",C("gift-this-package")]})}),(0,s.jsx)(k,{isItemInCart:t,item:a,displayFull:r,addToCartPressed:l,setAddToCartPressed:i}),(0,s.jsx)(T,{isItemInCart:t,item:a,displayFull:r,addToCartPressed:l,setAddToCartPressed:i}),(0,s.jsx)(_,{isItemInCart:t,item:a,displayFull:r,addToCartPressed:!1,setAddToCartPressed:i})]})}function k(e){let{isItemInCart:t,item:a,displayFull:r,addToCartPressed:l,setAddToCartPressed:i}=e,n=!a.is_unavailable,[d,u]=(0,v.useState)(!1),{handleAddItem:m}=x(),f=(0,c.usePathname)(),p=(0,o.useTranslations)("card"),g=async()=>{try{u(!0),i(!0),await m({id:a.id,calledFromCheckout:"/checkout"===f,payment_type:"regular",itemType:"regular"})}catch(e){console.error("Error while adding item:",e)}finally{u(!1),i(!1)}};if(t)return null;let b=p(n?"buy":"unavailable");return(0,s.jsxs)(h.z,{onClick:g,disabled:!n||d||l,className:(0,y.W)("h-[50px] gap-2",!r&&"min-w-[180px]"),children:[(0,s.jsx)(z,{isItemInCart:t,loading:d}),b]})}function T(e){let{isItemInCart:t,item:a,displayFull:r,addToCartPressed:l,setAddToCartPressed:i,wide:n=!1}=e,d=(0,o.useTranslations)("card"),[u,m]=(0,v.useState)(!1),{handleAddItem:f}=x(),p=(0,c.usePathname)(),g=async()=>{try{i(!0),m(!0),await f({id:a.id,calledFromCheckout:"/checkout"===p,payment_type:"subscription",itemType:"subscription"})}catch(e){console.error("Error while adding item:",e)}finally{m(!1),i(!1)}};return t||!a.is_subs?null:(0,s.jsxs)(h.z,{disabled:u||l,onClick:g,className:(0,y.W)("h-[50px] gap-2",n?"w-full":"col-span-2",(!r||n)&&"min-w-[180px]"),children:[(0,s.jsx)(z,{isItemInCart:t,loading:u}),d("subscribe")]})}function _(e){let{isItemInCart:t,item:a,displayFull:r,wide:l=!1}=e,i=(0,o.useTranslations)("card"),[n,d]=(0,v.useState)(!1),{handleRemoveItem:c}=x(),u=async()=>{try{d(!0),await c(a.id)}catch(e){console.error("Error while removing item:",e)}finally{d(!1)}};return t?(0,s.jsxs)(h.z,{disabled:n,onClick:u,className:(0,y.W)("h-[50px] gap-2",l?"w-full":"",!r&&"min-w-[180px]"),children:[(0,s.jsx)(z,{isItemInCart:t,loading:n}),i("remove")]}):null}function z(e){let{isItemInCart:t,loading:a}=e;return a?(0,s.jsx)(j.Z,{className:"animate-spin",size:24}):t?(0,s.jsx)(w.Z,{"aria-hidden":!0,size:24}):(0,s.jsx)(N.Z,{"aria-hidden":!0,size:24})}},568:function(e,t,a){a.d(t,{n:function(){return h}});var s=a(6287),r=a(5673),l=a(6201),i=a(6998),n=a(440),d=a(9334),o=a(4542),c=a(767);let u=d.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(o.fC,{ref:t,className:(0,c.cn)("relative overflow-hidden",a),...l,children:[(0,s.jsx)(o.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(m,{}),(0,s.jsx)(o.Ns,{})]})});u.displayName=o.fC.displayName;let m=d.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...l}=e;return(0,s.jsx)(o.gb,{ref:t,orientation:r,className:(0,c.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,s.jsx)(o.q4,{className:"relative flex-1 rounded-full bg-border"})})});m.displayName=o.gb.displayName;var f=a(6729),p=a(2925);let{getItem:x}=(0,r.U)(l._),h=e=>{let{show:t,onHide:a,id:r,route:l}=e,{items:o}=(0,f.x)(),c=o.some(e=>e.id===r),[m,h]=(0,d.useState)(),[g,y]=(0,d.useState)(!1),b=(null==m?void 0:m.gifting)===1||(null==m?void 0:m.gifting)===!0;return(0,d.useEffect)(()=>{x(r,l).then(e=>{h(e)}).catch(()=>{h(void 0)})},[r,l]),(0,s.jsx)(n.Vq,{open:t,onOpenChange:a,children:(0,s.jsxs)(n.cZ,{className:"w-full max-w-[720px] p-0",children:[(0,s.jsx)(n.fK,{className:"border-b border-accent p-4 py-6",children:(0,s.jsx)(n.$N,{className:"text-card-foreground",children:null==m?void 0:m.name})}),(0,s.jsx)(u,{className:"ql-editor prose max-h-[500px] w-full p-4",children:(0,s.jsx)("div",{className:"prose w-full overflow-y-auto text-muted-foreground prose-headings:text-accent-foreground",dangerouslySetInnerHTML:{__html:(null==m?void 0:m.description)||""}})}),(0,s.jsxs)(n.cN,{className:"items-center justify-between gap-2 border-t border-accent p-4 sm:justify-between",children:[(0,s.jsx)(i.t,{value:(null==m?void 0:m.price)||0,isVirtual:null==m?void 0:m.is_virtual_currency_only,className:"font-bold"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(p.TS,{isItemInCart:c,item:m,displayFull:!1,setAddToCartPressed:y,addToCartPressed:g,is_subs_only:null==m?void 0:m.is_subs_only,showGiftButton:b})})]})]})})}},440:function(e,t,a){a.d(t,{$N:function(){return p},Vq:function(){return d},cN:function(){return f},cZ:function(){return u},fK:function(){return m}});var s=a(6287),r=a(9334),l=a(6719),i=a(8953),n=a(767);let d=l.fC;l.xz;let o=l.h_;l.x8;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 grid max-h-screen place-items-center overflow-y-auto bg-black/30 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=l.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsx)(o,{children:(0,s.jsx)(c,{children:(0,s.jsxs)(l.VY,{ref:t,className:(0,n.cn)("relative z-50 grid w-full max-w-lg gap-4 bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg md:w-full",a),...d,children:[r,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})})})});u.displayName=l.VY.displayName;let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=l.Dx.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})}).displayName=l.dk.displayName},3908:function(e,t,a){a.d(t,{I:function(){return i}});var s=a(6287),r=a(9334),l=a(767);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background transition-all file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"}}]);